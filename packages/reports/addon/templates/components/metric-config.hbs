{{!-- Copyright 2018, Yahoo Holdings Inc. Licensed under the terms of the MIT license. See accompanying LICENSE.md file for terms. --}}
{{#basic-dropdown
  calculatePosition=calculatePosition
  as |dd|
}}
  {{#dd.trigger class='metric-config__dropdown-trigger'}}
    {{navi-icon 'cog' class='metric-config__trigger-icon'}}
  {{/dd.trigger}}

  {{#dd.content class='metric-config__dropdown-container'}}
    {{#navi-list-selector
       items=allParameters
       searchField='name'
       selected=selectedParams
       title=metric.name
       as | params areParamsFiltered |
    }}
        {{#grouped-list
            items=params
            shouldOpenAllGroups=true
            groupByField='param'
            sortByField='name'
            as | param |
        }}
            <label class='grouped-list__item-label'>
                <input class='checkbox-selector__checkbox' type='checkbox' checked={{get parametersChecked param.id}}/>
                {{param.name}} ({{param.id}})
            </label>

            {{!-- TODO check if param is filtered --}}
            {{navi-icon
                'filter'
                class=(concat 'metric-config__filter-icon ' 'checkbox-selector__filter')
            }}
        {{/grouped-list}}
    {{/navi-list-selector}}
    <div class='metric-config__footer'>
      <div class='metric-config__done-btn btn btn-primary' onclick={{action dd.actions.close}}>Done</div>
    </div>
  {{/dd.content}}
{{/basic-dropdown}}
